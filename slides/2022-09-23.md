
---
title: Session 2 - Lab 1
author: Daniel Perdices
institute: Universidad Aut√≥noma de Madrid
theme: metropolis
date: 23/09/2022
---

# What are we going to do today?
\tableofcontents

#
\section{Recap of Wireshark}

# How to start Wireshark?

Run in a terminal

```bash
$ sudo wireshark # or wireshark-gtk
```

- Permission error when starting live capture if you open it without sudo.

- Remember: `<TAB>` is your BFF in bash.

# Visualization filter

The filters on the top part of the screen

![Visualization filter (green bar on top of packet list)](https://static.packt-cdn.com/products/9781789958096/graphics/assets/6c1c9f53-d54f-4e29-8890-c186a523fd83.png)

## Characteristics

- Flexible

- They can be undone

- Only inside Wireshark (or tools from same devs)

- Slow

# Visualization filter

## Examples:

- All ARP traffic
```
```

- All packets with TCP source port < 10000
```
```

- First ten packets
```
```

- All traffic going to or coming from address 10.0.0.1
```
```

# Capture filter

The filters when you configure a network interface

![Capture filter ](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQmaiouPMsEAaTUfjhRAz2Ev4uZMr1vpeC8Rg&usqp=CAU){ width=50% }

## Characteristics

- Less flexible.

- You cannot "uncapture" what it has not been captured.

- Format is widely accepted. See BPF (Berkeley Packet Filter)

- Fast, they compile to assembly code running in the kernel


# Capture filter

## Examples:

- All ARP traffic
```
```

- All packets with TCP source port = 22
```
```

- TCP and UDP traffic
```
```

- All traffic going to or coming from address 10.0.0.1
```
```

#
\section{Recap of Python}

# Basic syntax

```Python
def gradeInSpanish(grade, distinction=False, 
                recommendation=False):
    if grade < 5:
        anot_grade = "Suspenso"
    elif grade < 7:
        anot_grade = "Aprobado"
    elif grade < 9:
        anot_grade = "Notable"
    elif distinction and recommendation:
        anot_grade = "M. Honor"
    else:
        anot_grade = "Sobresaliente"
return anot_grade
```

# Basic syntax

```Python
for i in range(10+1):
    print(gradeInSpanish(i))
```

- What's the first value of i? And the last one?
- Transform this code to save the result into a list instead of printing it.

```Python
```
# Basic types

```Python
a = 1 
a1 = 0x01
a2 = 0b01
b = 1.0
c = "1"
d = True
e = None
f = 1+2j # Sorry, I know you already
         # passed analog circuits... :)
```

# Data structures
- Remember: types are not enforced
```Python
a = [1,2,"3"] # list
b = {1,2,"3",3} # set (uniqueness)
c = (1,2,"3") # tuple (unmodifiable)
```
- Dictionaries are extremely useful:
```Python
d = {1:"foo", 2: "bar"}
```

- What happens if you iterate `a`, `b` or `c`? And `d`?
- How do you sort an Iterable? 

#
\section{Advanced Python}


# How to convert from integer to bytes?

First option (the one I personally don't like)
```Python
ethertype = struct.pack("!H", value)
```
Problems:

- Harder to read

- Requires "!" to indicate network order (big endian)

- Requires "B", "H", "I", or "Q" for the size (1, 2, 4, 8 bytes respectively) 

Advantage:

- It allows you to do multiple conversions at once:

```Python
random_bytes = struct.pack("!BH", value1,value2)
```


# How to convert from integer to bytes?

Second option (the one I personally like)
```Python
# parenthesis are required if it is a literal
# they are not if it's a variable
ethertype = (value).to_bytes(2, # size of the number
                            order="big") #big=network
```
Advantages:

- Easier to read

- Size and order are explicitly declared and human-readable 

Problem:

- It does not allow you to do multiple conversions at once:

```Python
random_bytes = value1.to_bytes(1) + \
                value2.to_bytes(2, order="big")
```